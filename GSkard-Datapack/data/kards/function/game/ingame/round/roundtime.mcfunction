execute store result bossbar minecraft:roundtime value run scoreboard players remove time roundtime 1
execute if score time roundtime matches 0 run function kards:game/ingame/round/take_turns/timeout

scoreboard players set #system roundtimeOper 20
scoreboard players operation time roundtimeOper = time roundtime
scoreboard players operation time roundtimeOper /= #system roundtimeOper

function kards:game/ingame/round/roundtime_bossbar
# execute if score #system GameRound matches 0 unless score #system RoundCount matches -1 run bossbar set minecraft:roundtime name ["",{translate:"space.-13",font:"space:default"},"\uE005",{translate:"space.-61",font:"space:default"},{translate: "kards.function.game.ingame.round.roundtime.1", fallback: "剩余时间",color:"gold",bold:false},{score:{name:"time",objective:"roundtimeOper"},color:"green"},{translate: "kards.function.game.ingame.round.roundtime.2", fallback: "s",color:"green"},{translate:"space.20",font:"space:default"},"  \uE004",{translate:"space.-43",font:"space:default"},{translate: "kards.function.game.ingame.round.roundtime.3", fallback: "蓝方回合",color:"blue",bold:true},{translate:"space.20",font:"space:default"},"  \uE004",{translate:"space.-45",font:"space:default"},{translate: "kards.function.game.ingame.round.roundtime.4", fallback: "回合数",color:"gold",bold:false},{score:{name:"回合数",objective:"GameRound"},color:"green"},{translate: "kards.function.game.ingame.general.2", fallback: "/",color:"gray"},{score:{name:"#system",objective:"RoundCount"},color:"gray"}]
# execute if score #system GameRound matches 1 unless score #system RoundCount matches -1 run bossbar set minecraft:roundtime name ["",{translate:"space.-13",font:"space:default"},"\uE005",{translate:"space.-61",font:"space:default"},{translate: "kards.function.game.ingame.round.roundtime.1", fallback: "剩余时间",color:"gold",bold:false},{score:{name:"time",objective:"roundtimeOper"},color:"green"},{translate: "kards.function.game.ingame.round.roundtime.2", fallback: "s",color:"green"},{translate:"space.20",font:"space:default"},"  \uE004",{translate:"space.-43",font:"space:default"},{translate: "kards.function.game.ingame.round.roundtime.5", fallback: "红方回合",color:"red",bold:true},{translate:"space.20",font:"space:default"},"  \uE004",{translate:"space.-45",font:"space:default"},{translate: "kards.function.game.ingame.round.roundtime.4", fallback: "回合数",color:"gold",bold:false},{score:{name:"回合数",objective:"GameRound"},color:"green"},{translate: "kards.function.game.ingame.general.2", fallback: "/",color:"gray"},{score:{name:"#system",objective:"RoundCount"},color:"gray"}]

# execute if score #system GameRound matches 0 if score #system RoundCount matches -1 run bossbar set minecraft:roundtime name ["",{translate:"space.-13",font:"space:default"},"\uE005",{translate:"space.-61",font:"space:default"},{translate: "kards.function.game.ingame.round.roundtime.1", fallback: "剩余时间",color:"gold",bold:false},{score:{name:"time",objective:"roundtimeOper"},color:"green"},{translate: "kards.function.game.ingame.round.roundtime.2", fallback: "s",color:"green"},{translate:"space.20",font:"space:default"},"  \uE004",{translate:"space.-43",font:"space:default"},{translate: "kards.function.game.ingame.round.roundtime.3", fallback: "蓝方回合",color:"blue",bold:true},{translate:"space.20",font:"space:default"},"  \uE004",{translate:"space.-45",font:"space:default"},{translate: "kards.function.game.ingame.round.roundtime.4", fallback: "回合数",color:"gold",bold:false},{score:{name:"回合数",objective:"GameRound"},color:"green"},{translate: "kards.function.game.ingame.round.roundtime.6", fallback: "/∞",color:"gray"}]
# execute if score #system GameRound matches 1 if score #system RoundCount matches -1 run bossbar set minecraft:roundtime name ["",{translate:"space.-13",font:"space:default"},"\uE005",{translate:"space.-61",font:"space:default"},{translate: "kards.function.game.ingame.round.roundtime.1", fallback: "剩余时间",color:"gold",bold:false},{score:{name:"time",objective:"roundtimeOper"},color:"green"},{translate: "kards.function.game.ingame.round.roundtime.2", fallback: "s",color:"green"},{translate:"space.20",font:"space:default"},"  \uE004",{translate:"space.-43",font:"space:default"},{translate: "kards.function.game.ingame.round.roundtime.5", fallback: "红方回合",color:"red",bold:true},{translate:"space.20",font:"space:default"},"  \uE004",{translate:"space.-45",font:"space:default"},{translate: "kards.function.game.ingame.round.roundtime.4", fallback: "回合数",color:"gold",bold:false},{score:{name:"回合数",objective:"GameRound"},color:"green"},{translate: "kards.function.game.ingame.round.roundtime.6", fallback: "/∞",color:"gray"}]

